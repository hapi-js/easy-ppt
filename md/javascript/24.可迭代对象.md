# å¯è¿­ä»£å¯¹è±¡

---

## å­—ç¬¦ä¸²æ˜¯å¯è¿­ä»£çš„

å¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ`for..of` éå†å®ƒçš„æ¯ä¸ªå­—ç¬¦ï¼š

```javascript [1-100]
for (let char of "test") {
  // è§¦å‘ 4 æ¬¡ï¼Œæ¯ä¸ªå­—ç¬¦ä¸€æ¬¡
  console.log( char ); // t, then e, then s, then t
}
```

---

## æ˜¾å¼è°ƒç”¨è¿­ä»£å™¨

é‡‡ç”¨ä¸ `for..of` å®Œå…¨ç›¸åŒçš„æ–¹å¼éå†å­—ç¬¦ä¸²ï¼Œä½†ä½¿ç”¨çš„æ˜¯ç›´æ¥è°ƒç”¨ã€‚

```javascript [1-100]
let str = "Hello";
// å’Œ for..of åšç›¸åŒçš„äº‹
// for (let char of str) console.log(char);
let iterator = str[Symbol.iterator]();

while (true) {
  let result = iterator.next();
  if (result.done) break;
  console.log(result.value); // ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¾“å‡ºå­—ç¬¦
}
```

---

## ç±»æ•°ç»„ï¼ˆarray-likeï¼‰

å­—ç¬¦ä¸²å³æ˜¯å¯è¿­ä»£çš„ï¼ˆ`for..of` å¯¹å®ƒä»¬æœ‰æ•ˆï¼‰ï¼Œåˆæ˜¯ç±»æ•°ç»„çš„ï¼ˆå®ƒä»¬æœ‰æ•°å€¼ç´¢å¼•å’Œ `length` å±æ€§ï¼‰ã€‚

ä¸‹é¢è¿™ä¸ªå¯¹è±¡åˆ™æ˜¯ç±»æ•°ç»„çš„ï¼Œä½†æ˜¯ä¸å¯è¿­ä»£ï¼š

```javascript [1-100]
let arrayLike = { // æœ‰ç´¢å¼•å’Œ length å±æ€§ => ç±»æ•°ç»„å¯¹è±¡
  0: "Hello",
  1: "World",
  length: 2
};

// Error (no Symbol.iterator)
for (let item of arrayLike) {}
```

---

## Array.from

æœ‰ä¸€ä¸ªå…¨å±€æ–¹æ³• [Array.from](https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Array/from) å¯ä»¥æ¥å—ä¸€ä¸ªå¯è¿­ä»£æˆ–ç±»æ•°ç»„çš„å€¼ï¼Œå¹¶ä»ä¸­è·å–ä¸€ä¸ªâ€œçœŸæ­£çš„â€æ•°ç»„ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è°ƒç”¨æ•°ç»„æ–¹æ³•äº†ã€‚

```javascript [1-100]
let arrayLike = {
  0: "Hello",
  1: "World",
  length: 2
};

let arr = Array.from(arrayLike); // (*)
console.log(arr.pop()); // Worldï¼ˆpop æ–¹æ³•æœ‰æ•ˆï¼‰
```

===

### å¯é€‰çš„æ˜ å°„ï¼ˆmappingï¼‰

`Array.from` çš„å®Œæ•´è¯­æ³•å…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ªå¯é€‰çš„â€œæ˜ å°„ï¼ˆmappingï¼‰â€å‡½æ•°ï¼š

```javascript [1-100]
Array.from(obj[, mapFn, thisArg])
```

===

### å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°

å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•° `mapFn` å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨å¯¹è±¡ä¸­çš„å…ƒç´ è¢«æ·»åŠ åˆ°æ•°ç»„å‰ï¼Œè¢«åº”ç”¨äºæ¯ä¸ªå…ƒç´ ï¼Œæ­¤å¤– `thisArg` å…è®¸æˆ‘ä»¬ä¸ºè¯¥å‡½æ•°è®¾ç½® `this`ã€‚

```javascript [1-100]
// å‡è®¾ range æ¥è‡ªä¸Šæ–‡ä¾‹å­ä¸­

// æ±‚æ¯ä¸ªæ•°çš„å¹³æ–¹
let arr = Array.from(range, num => num * num);

console.log(arr); // 1,4,9,16,25
```

===

### å•ä¸ªå­—ç¬¦çš„æ•°ç»„

ç°åœ¨æˆ‘ä»¬ç”¨ `Array.from` å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºå•ä¸ªå­—ç¬¦çš„æ•°ç»„ï¼š

```javascript [1-100]
let str = 'ğ’³ğŸ˜‚';
// å°† str æ‹†åˆ†ä¸ºå­—ç¬¦æ•°ç»„
let chars = Array.from(str);
console.log(chars[0]); // ğ’³
console.log(chars[1]); // ğŸ˜‚
console.log(chars.length); // 2
```

===

### ç­‰åŒä»£ç 

```javascript [1-100]
let str = 'ğ’³ğŸ˜‚';

let chars = []; // Array.from å†…éƒ¨æ‰§è¡Œç›¸åŒçš„å¾ªç¯
for (let char of str) {
  chars.push(char);
}

console.log(chars);
```

